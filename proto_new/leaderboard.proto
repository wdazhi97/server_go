syntax = "proto3";

package leaderboard_service;
option go_package = "./proto_new";

import "proto_new/common.proto";

// 排行榜服务
service LeaderboardService {
  // 获取排行榜
  rpc GetLeaderboard(GetLeaderboardRequest) returns (GetLeaderboardResponse);
  // 更新分数
  rpc UpdateScore(UpdateScoreRequest) returns (UpdateScoreResponse);
  // 获取用户排名
  rpc GetUserRank(GetUserRankRequest) returns (GetUserRankResponse);
}

// 排行榜服务消息
message GetLeaderboardRequest {
  int32 limit = 1;
  int32 offset = 2;
}

message GetLeaderboardResponse {
  bool success = 1;
  string message = 2;
  repeated common.LeaderboardEntry entries = 3;
}

message UpdateScoreRequest {
  string user_id = 1;
  int32 score = 2;
  bool game_won = 3;
}

message UpdateScoreResponse {
  bool success = 1;
  string message = 2;
  int32 new_score = 3;
  int32 rank = 4;
}

message GetUserRankRequest {
  string user_id = 1;
}

message GetUserRankResponse {
  bool success = 1;
  string message = 2;
  int32 rank = 3;
  int32 total_users = 4;
}